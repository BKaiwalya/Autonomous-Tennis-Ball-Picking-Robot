http://mbed.org/users/electromotivated/code/QEI/#50aae578cb89
